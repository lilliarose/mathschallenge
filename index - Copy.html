<!DOCTYPE HTML>
<html lang = 'en'>
    <head>
        <title>Maths Challenge</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <!--<script>
            alert("hello");
            //Go! Button Code
            window.onload = (event) => {
                    addClickListeners();
            };
    
            function addClickListeners() {
                let button = document.getElementById("goButton");
                button.addEventListener("click", alert('helloooo'));
            }
    
            //What stage, do function for that stage.
    
    
    
    
                // pick a random number given min and max number, a useful function
            function pickOneNums(minNum, maxNum) {
                let numOne = Math.floor((Math.random() * maxNum) + minNum);
                return numOne
            }
    
                //Code to see/show what stage has been selected
                let something = document.getElementById("stageDropdown");
                function show(){
                    var as = document.forms[0].ddlViewBy.value;
                    var strUser = e.options[e.selectedIndex].value;
                    console.log(as, strUser);
                }
                    e.onchange=show;
                    show();
    
            //Change questions for stage on go.
            //we pick one number, then a symbol and then a number.
            //
    
            function changeValue() {
                var numOneList = numOne(1,9)
                let numOneList = [1, 2, 3, 4];
                document.getElementById("q1").innerHTML = "9"; //numOneList[0]+str(symbol())+numTwo(1,9);
                document.getElementById("q2").innerHTML = "New text!";
                document.getElementById("q3").innerHTML = numTwo(1,9);
            }
            
            //funtion for pick first number
            function numOne(minNum, maxNum) {
                let numOne = Math.floor((Math.random() * maxNum) + minNum);
            return numOne
            }
            //function for picking second number
            function numTwo(minNum, maxNum) {
                let numTwo = Math.floor((Math.random() * maxNum) + minNum);
            return numTwo
            }
            //function for picking symbol
            function symbol() {
                let symbol = Math.floor((Math.random() * 0) + 5)
                if (symbol = 1) {
                    let symbol = '+'
                } else if (symbol = 2) {
                    let symbol = '-'
                } else if (symbol = 3) {
                    let symbol = '*'
                } else if (symbol = 4) {
                    let symbol = '/'
                }
    
                return symbol
            }    
    
        </script>-->
        <script>
            //does this as soon as the window loads
            window.onload = (event) => {
                    addClickListeners();
            };
            
            //define variables
            let currentStage = undefined

            //called when window loads
            function addClickListeners() {
                //go button click listener
                let button = document.getElementById("goButton");
                button.addEventListener("click", changeValue);
            }

            //changes values of questions by calling the get questions functiom
            function changeValue() {
                const questions_answers = questions(currentStage)
                const element_id = ['q1','q2','q3']
                    for (let i = 0; i < 10; i++) {
                        // Runs 10 times and changes element id then put in a question to be shown
                        document.getElementById(element_id[i]).innerHTML = questions_answers[i][0];
                    }
            }


            //gets what stage is selected
            function changeStage() {
                currentStage = document.getElementById("dropdown-menu").value;
            }

            //returns questions - not sure what form (array - arrays within arrays - multiple?)
            //need to use current stage to see what has to be done to get questions
            function questions(currentStage) {
                if (currentStage == 'stageOne') {
                    const listQA = []
                    for (let i = 0; i < 10; i++){
                        // Runs 10 times
                        listQA.push(pickTwoNumsOrdered(10,i+1));
                    }
                    return(listQA)
                }

                if (currentStage == 'stageTwo') {
                    const listQA = []
                    for (let i = 0; i < 10; i++){
                        // Runs 10 times
                        listQA.push(pickTwoNumsOrdered(10,i+1));
                    }
                    listQA = randomShuffle(listQA);
                    return(listQA)
                }
            }

            //picks two random numbers and returns a multiplication sum, unless numOne is given.
            function pickTwoNums(numOne = Math.floor((Math.random()*10)+1), numTwo = Math.floor((Math.random()*10)+1)) {
                var answer = numOne*numTwo
                return [numOne+ ' x '+numTwo, answer]
            }

            //same as above, except numOne is given and numTwo is in order from 1 -> 10
            function pickTwoNumsOrdered(numOne = Math.floor((Math.random()*10)+1),numTwo){
                var answer = numOne*numTwo
                return [numOne+ ' x '+numTwo, answer]
            }


            //function for picking symbol
            function symbol() {
                let symbol = Math.floor((Math.random() * 0) + 5)
                if (symbol = 1) {
                    let symbol = '+'
                } else if (symbol = 2) {
                    let symbol = '-'
                } else if (symbol = 3) {
                    let symbol = '*'
                } else if (symbol = 4) {
                    let symbol = '/'
                }
    
                return symbol
            }

            
            //function for generating an array of numbers with a 'start' 'end' and 'step'
            function generateNumberArray(start, end, step) {
                let array = []
                for (var i = start; i <= end; i+step) {
                    array .push(i);
                }
                return array 
            }

            //function to perform a random shuffle of an array
            //See https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle
            function randomShuffle(array) {
                let currentIndex = array.length,  randomIndex;

                // While there remain elements to shuffle.
                while (currentIndex != 0) {

                    // Pick a remaining element.
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex--;

                    // And swap it with the current element.
                    [array[currentIndex], array[randomIndex]] = [
                    array[randomIndex], array[currentIndex]];
                }

                return array;
            }

            // funtion to pick a random sample of k items from an array
            function randomSample(array, k) {
                //NEED TO CODE THIS
                //should work much like random shuffle, but build a new array from the entry at the selected array index
                randomIndex = Math.floor(Math.random() * currentIndex)

            }

            // funtion to pick a random sample of k items from an array, item can be repeated
            function randomChoice(array, k) {
                //NEED TO CODE THIS
                randomIndex = Math.floor(Math.random() * currentIndex)

            }





        </script>
    </head>
    

    <body style="align-content: center; padding-top: 5%;" id="body">

        <style>
        /*    #body {
            width: 100%;
            height: 100vh;
            background: url("background.jpg") top right;
            background-size: cover;
            position: relative;
            }

            .white {
                color: white;
            } */
        </style>


        <!--Title-->
        <h1 class="text-center white">Maths Challenge</h1>
        <h6 class="text-center white">First, select a stage. Then when you press go, questions will apppear! Answer them as fast as you can and press finish to see your speed
            and how many you got correct.</h6>

        <!--Dropdown-->
        <div class="dropdown d-flex justify-content-center" style="padding-top: 2%;"></i>
            <select id="dropdown-menu" onchange="changeStage()" style="text-align-last: center; background-color: #aebdff; min-width: 200px; min-height: 50px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);">
                <option value="unselected" style="text-align-last: center;">Select Stage</option>
                <option value="stageOne" style="text-align-last: center;">1.  10s in Order</option>
                <option value="stageTwo" style="text-align-last: center;">2.  10s mixed</option>
                <option value="stageThree" style="text-align-last: center;">3.  10s division mixed</option>
            </select>
        </div>

        <!--Go button-->
        <div class="container-fluid d-flex justify-content-center" style="padding-bottom: 2%; padding-top: 2%;">
            <button class="btn btn-primary" type="submit" id="goButton" >Go!</button>
        </div>

        <!--Table for challenge-->
        <div class="container-fluid">            
            <div class="d-flex justify-content-center">
                <table class="table w-25">
                    <thead>
                    <tr>
                        <th scope="col" style="width: 24%">Number</th>
                        <th scope="col" style="width: 24%">Question</th>
                        <th scope="col" style="width: 28%">Your Answer</th>
                        <th scope="col" style="width: 24%">Marks</th>
                    </tr>
                    </thead>
                    <tbody>

                        <!--Row one-->
                    <tr>
                        <th scope="row">1</th>
                        <td id="q1">1 x 2</td>
                        <td>
                            <input type="number" class="form-control" id="inputAnswer1" tabindex="1">
                        </td>
                        <td>
                            <fieldset disabled>
                                <div class="form-group">
                                    <input class="form-control" id ="mark1">
                                </div>
                            </fieldset>
                        </td>
                    </tr>

                    
                    <!--Row two-->
                    <tr>
                        <th scope="row">2</th>
                        <td id="q2">2 x 2</td>
                        <td>
                            <input type="number" class="form-control" id="inputAnswer2" tabindex="1">
                        </td>
                        <td>
                            <fieldset disabled>
                                <div class="form-group">
                                    <input class="form-control" id ="mark2">
                                </div>
                            </fieldset>
                        </td>
                    </tr>

                    <!--Row three-->
                    <tr>
                        <th scope="row">3</th>
                        <td id="q3">3 x 2</td>
                        <td>
                            <input type="number" class="form-control" id="inputAnswer3" tabindex="2">
                        </td>
                        <td>
                            <fieldset disabled>
                                <div class="form-group">
                                    <input class="form-control" id="mark3">
                                </div>
                            </fieldset>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>


            <!--Mark it button-->
        <div class="container-fluid d-flex justify-content-center">
            <button class="btn btn-primary" type="submit">Mark Answers</button>
        </div>
        
        <!--JavaScript Links-->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    </body>

    <footer>

    </footer>